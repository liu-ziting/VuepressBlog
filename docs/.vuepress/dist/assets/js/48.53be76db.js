(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{283:function(t,n,s){"use strict";s.r(n);var a=s(0),r=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"利用python进行微信防撤回的监听"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#利用python进行微信防撤回的监听"}},[t._v("#")]),t._v(" 利用python进行微信防撤回的监听")]),t._v(" "),s("h2",{attrs:{id:"项目介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目介绍"}},[t._v("#")]),t._v(" 项目介绍")]),t._v(" "),s("blockquote",[s("p",[t._v("基于python+wxpy进行微信防撤回的监听")])]),t._v(" "),s("p",[t._v("利用python进行微信防撤回，实际上的原理是这个微信和你聊天的对象同处再一个群里，它会实时监控聊天记录，\n检测到消息状态为撤回，就会从撤回之前的保存的记录里，拿出这条数据，转发给出去，从而达到一个防撤回的效果。\n通俗的讲就是实时备份你的聊天记录，然后提取出来撤回的那条消息，然后通过你的微信发出去。")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"产品依赖于"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#产品依赖于"}},[t._v("#")]),t._v(" 产品依赖于")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.python.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://wxpy.readthedocs.io/zh/latest/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Wxpy"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"项目运行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目运行"}},[t._v("#")]),t._v(" 项目运行")]),t._v(" "),s("pre",[s("code",[t._v("# 安装Python环境\n可百度一下相关教程，在这不做说明\n\n# 克隆到本地\ngit clone https://github.com/liu-ziting/python-wx-fch.git\n\n# 进入文件夹\ncd python-wx-fch\n\n# 安装依赖\npip install \n可通过 pip install 直接安装相关模块，\n如运行时还有因模块报错，也可以直接pip install 【模块名】直接安装即可。\n本项目以及后续相关都依赖于以下模块\n\nimport requests\nfrom requests import exceptions\nfrom urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nfrom urllib.parse import urlencode\nfrom threading import Timer\nimport re\nfrom wxpy import *\nimport  schedule\nimport  time\nimport http\nimport  json \nimport datetime\nimport random\nimport os\nimport ctypes\n\n重要：其中 wxpy 模块是本项目以及后续项目中很重要的模块，就是因为这个开源项目，我们才能使其与微信产生交互。\n\n# 运行\n \n直接点击文件PreventWithdrawal或者在目录中打开cmd:PreventWithdrawal.py，运行即可。\n")])]),t._v(" "),s("h2",{attrs:{id:"代码说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码说明"}},[t._v("#")]),t._v(" 代码说明")]),t._v(" "),s("p",[t._v("获取你要检测的群对象，如果你想监听所有对象，则不需要；\n将撤回的消息 转发到特定的群里，以供再其他微信查看，可以是单个好友或者文件传输助手")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("Test "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groups"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("u'C.B.M电子竞技俱乐部'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n\nrecallNotice "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ensure_one"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("groups"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'C.B.M电子竞技俱乐部'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("注册事件，所有群的消息")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@bot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Group"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("撤回类型")]),t._v(" "),s("div",{staticClass:"language-python line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文本 TEXT = 'Text'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 位置 MAP = 'Map' 1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 名片 CARD = 'Card' 2")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 分享 SHARING = 'Sharing' 3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 图片 PICTURE = 'Picture'  4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 语音 RECORDING = 'Recording' 5")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文件 ATTACHMENT = 'Attachment' 6")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 视频 VIDEO = 'Video' 7")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h2",{attrs:{id:"效果展示"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#效果展示"}},[t._v("#")]),t._v(" 效果展示")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://tc.lihail.cn/wxfch.png",alt:"微信防撤回截图"}})])])}),[],!1,null,null,null);n.default=r.exports}}]);